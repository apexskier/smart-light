<!DOCTYPE html><meta charset=utf-8><meta name=viewport content=\"width=device-width,initial-scale=1\"><title>ðŸ’¡</title><style>body{font-family:-apple-system,\"Helvetica Neue\",\"Lucida Grande\",sans-serif;color:#222;padding:10px 15px;font-size:28px}h1{font-size:30px;margin-top:0}p{margin-top:0;margin-bottom:.5em;text-align:center}.lb-c{width:100%;text-align:center;margin-bottom:10px}#lb{margin:0 auto;height:100px;width:100px;border-radius:4px;border:1px solid #222;background-color:rgb(INITIAL_R,INITIAL_G,INITIAL_B)}#pv{display:inline-block;background-color:#fff;height:1em;width:50%;border-radius:4px;vertical-align:text-bottom}#msg{border-radius:2px;background-color:#ffcdcd;color:#9e0000;border:1px solid;padding:4px 8px;display:none;font-size:18px;text-align:left}input[type=range]{-webkit-appearance:none;width:100%;margin-bottom:12px}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{width:100%;height:4px;border-radius:2px;cursor:pointer;background:#999;box-shadow:inset 0 1px 1px rgba(0,0,0,.4)}input[type=range]::-webkit-slider-thumb{box-shadow:0 1px 6px rgba(0,0,0,.4);height:24px;width:24px;border-radius:12px;background:#aaa;cursor:pointer;-webkit-appearance:none;margin-top:-10px;background-image:linear-gradient(to bottom,rgba(255,255,255,.1) 0,rgba(0,0,0,.1) 100%)}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input#red[type=range]::-webkit-slider-thumb{border:1px solid #a00;background-color:red}input#green[type=range]::-webkit-slider-thumb{border:1px solid #0a0;background-color:#0f0}input#blue[type=range]::-webkit-slider-thumb{border:1px solid #00a;background-color:#00f}</style><h1>Smart Light &#128161;</h1><p id=msg><div class=lb-c><div id=lb></div></div><p><input id=red value=255 type=range step=1 min=0 max=255><br><input id=green value=255 type=range step=1 min=0 max=255><br><input id=blue value=255 type=range step=1 min=0 max=255><br><p class=ctl><span id=turnOff>&#128244;</span> &nbsp;&nbsp; <span id=refresh>&#128260;</span> &nbsp;&nbsp; <span id=setbtn>&#10024;</span><p><span id=pv></span></p><script>function setpv(){pv.style.backgroundColor=\"rgb(\"+newColor[0]+\",\"+newColor[1]+\",\"+newColor[2]+\")\"}function error(e){msg.textContent=\"Error: \"+(error.response||\"unknown error\"),msg.style.display=\"block\"}function update(){ajax(\"GET\",\"/status\",function(e){var t=JSON.parse(e);lb.style.backgroundColor=\"rgb(\"+t.color.r+\",\"+t.color.g+\",\"+t.color.b+\")\",msg.style.display=\"none\"},error)}function ajax(e,t,n,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200==r.status?n(r.responseText):o(r))},r.open(e,t,!0),r.send()}var lb=document.getElementById(\"lb\"),msg=document.getElementById(\"msg\"),pv=document.getElementById(\"pv\"),rs=document.getElementById(\"red\"),bs=document.getElementById(\"blue\"),gs=document.getElementById(\"green\"),offbtn=document.getElementById(\"turnOff\"),refreshbtn=document.getElementById(\"refresh\"),setbtn=document.getElementById(\"setbtn\"),newColor=[255,255,255];rs.addEventListener(\"input\",function(e){newColor[0]=e.target.value,setpv()}),gs.addEventListener(\"input\",function(e){newColor[1]=e.target.value,setpv()}),bs.addEventListener(\"input\",function(e){newColor[2]=e.target.value,setpv()}),offbtn.addEventListener(\"click\",function(e){ajax(\"POST\",\"/off?duration=1000\",function(){lb.style.backgroundColor=\"rgb(0, 0, 0)\"},error)}),setbtn.addEventListener(\"click\",function(e){ajax(\"POST\",\"/color?r=\"+newColor[0]+\"&g=\"+newColor[1]+\"&b=\"+newColor[2]+\"&duration=1000\",function(){lb.style.backgroundColor=\"rgb(\"+newColor[0]+\", \"+newColor[1]+\", \"+newColor[2]+\")\"},error)}),refreshbtn.addEventListener(\"click\",function(e){update()})</script>
